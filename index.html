<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Free Ambigram Generator: Create 2D & 3D Word/Name Art Instantly</title>
  <meta name="description"
    content="Instantly generate beautiful ambigrams for 2 names, tattoos, or logos. Supports multi-word designs. Explore our guides for advanced creation tips!" />
  <meta name="keywords"
    content="ambigram generator, 3d ambigram generator, ambigram tattoo generator, free ambigram generator, create ambigram, stl generator, 3d printing, two word ambigram generator" />
  <meta name="google-adsense-account" content="ca-pub-3383070348689557" />
  <link rel="icon" type="image/x-icon" href="./favicon.ico" />
  <link rel="canonical" href="https://www.ambigramgenerator.me/" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ===== LOADING PERFORMANCE OPTIMIZATIONS START ===== -->

  <!-- 1. Preconnect to essential third-party domains to speed up initial connection. -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="preconnect" href="https://pagead2.googlesyndication.com" />

  <!-- 2. Preload critical assets (fonts and scripts) so they start downloading earlier. -->
  <link rel="preload" href="./assets/fontawesome-webfont-B-jkhYfk.woff2" as="font" type="font/woff2" crossorigin />

  <!-- Mobile-optimized resource loading -->
  <script>
    // Detect mobile device for resource prioritization
    const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent);
    const isLowEndDevice = /android 4\.|android 5\.|android 6\./i.test(navigator.userAgent);

    // Mobile-specific resource loading
    if (isMobile && !isLowEndDevice) {
      // Preload critical images for mobile LCP
      document.write('<link rel="preload" href="./assets/3D%20ambigram%20design%20example%20of%20a%20white%20marble%20sculpture%20that%20read-DEeH2fDq.webp" as="image" type="image/webp">');
      document.write('<link rel="preload" href="./assets/main-D62YCris.css" as="style" onload="this.rel=\'stylesheet\'">');
      document.write('<noscript><link rel="stylesheet" href="./assets/main-D62YCris.css"></noscript>');
    } else if (isLowEndDevice) {
      // Minimal loading for low-end devices
      document.write('<link rel="preload" href="./assets/main-D62YCris.css" as="style" onload="this.rel=\'stylesheet\'">');
      document.write('<noscript><link rel="stylesheet" href="./assets/main-D62YCris.css"></noscript>');
    } else {
      // Desktop loading
      document.write('<link rel="preload" href="./assets/3D%20ambigram%20design%20example%20of%20a%20white%20marble%20sculpture%20that%20read-DEeH2fDq.webp" as="image" type="image/webp">');
      document.write('<link rel="preload" href="./assets/main-D62YCris.css" as="style" onload="this.rel=\'stylesheet\'">');
      document.write('<noscript><link rel="stylesheet" href="./assets/main-D62YCris.css"></noscript>');
    }
  </script>

  <!-- Only preload essential scripts, not Three.js -->
  <link rel="preload" href="./assets/jqery.min-hYMwZ4vv.js" as="script" />


  <!-- 3. Load CSS. Your main CSS is loaded directly. Others are loaded asynchronously to prevent render-blocking. -->

  <!-- Critical CSS loaded inline for above-the-fold content -->
  <style>
    /* Critical styles for above-the-fold content with layout stability */
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, sans-serif;
      line-height: 1.6;
      overflow-x: hidden;
    }

    .bg-light {
      background-color: #F9FAFB;
    }

    .text-dark {
      color: #1F2937;
    }

    .font-sans {
      font-family: system-ui, -apple-system, sans-serif;
    }

    .bg-white {
      background-color: #ffffff;
    }

    .shadow-md {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .sticky {
      position: sticky;
    }

    .top-0 {
      top: 0;
    }

    .z-50 {
      z-index: 50;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .mx-auto {
      margin-left: auto;
      margin-right: auto;
    }

    .px-4 {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    .py-4 {
      padding-top: 1rem;
      padding-bottom: 1rem;
    }

    .flex {
      display: flex;
    }

    .justify-between {
      justify-content: space-between;
    }

    .items-center {
      align-items: center;
    }

    .text-xl {
      font-size: 1.25rem;
      line-height: 1.75rem;
    }

    .font-bold {
      font-weight: 700;
    }

    .text-primary {
      color: #3B82F6;
    }

    .hover\:text-primary:hover {
      color: #3B82F6;
    }

    .transition-colors {
      transition-property: color, background-color, border-color;
      transition-duration: 150ms;
    }

    /* Layout stability fixes - Aggressive CLS prevention */
    .grid {
      display: grid;
    }

    .grid-cols-1 {
      grid-template-columns: repeat(1, minmax(0, 1fr));
    }

    .gap-12 {
      gap: 3rem;
    }

    .gap-8 {
      gap: 2rem;
    }

    .gap-6 {
      gap: 1.5rem;
    }

    .gap-4 {
      gap: 1rem;
    }

    /* Aggressive layout shift prevention */
    img {
      max-width: 100%;
      height: auto;
      display: block;
      contain: layout style paint;
    }

    /* Mobile-specific optimizations */
    @media (max-width: 768px) {
      .hero-title {
        font-size: 2.5rem !important;
        line-height: 1.1 !important;
        margin-bottom: 1rem !important;
      }

      .hero-subtitle {
        font-size: 1.1rem !important;
        line-height: 1.4 !important;
        margin-bottom: 1.5rem !important;
      }

      .btn-primary {
        min-height: 2.5rem !important;
        min-width: 10rem !important;
        font-size: 0.9rem !important;
      }

      #c {
        height: 300px !important;
      }
    }

    /* Prevent font loading layout shift */
    .font-display {
      font-family: system-ui, -apple-system, sans-serif;
      font-display: swap;
    }

    /* Critical layout containers with fixed dimensions */
    .hero-section {
      min-height: 80vh;
      contain: layout;
    }

    .container {
      contain: layout;
    }

    /* Prevent layout shift during loading */
    .loading-placeholder {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
    }

    @keyframes loading {
      0% {
        background-position: 200% 0;
      }

      100% {
        background-position: -200% 0;
      }
    }

    /* Fixed dimensions for critical elements */
    .hero-section {
      min-height: 80vh;
    }

    .hero-title {
      font-size: 3rem;
      line-height: 1.1;
      margin-bottom: 1.5rem;
    }

    .hero-subtitle {
      font-size: 1.25rem;
      line-height: 1.5;
      margin-bottom: 2rem;
    }

    /* Button dimensions to prevent shift */
    .btn-primary {
      display: inline-flex;
      align-items: center;
      padding: 0.75rem 2rem;
      border-radius: 9999px;
      font-weight: 600;
      text-decoration: none;
      min-height: 3rem;
      min-width: 12rem;
    }

    /* Canvas container fixed dimensions */
    #c {
      width: 100%;
      height: 500px;
      display: block;
      background-color: #121212;
    }

    /* Prevent font loading layout shift */
    @font-face {
      font-family: 'Inter';
      font-display: swap;
      src: url('https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2') format('woff2');
      font-weight: 400 700;
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+21A9, U+21B3, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    @font-face {
      font-family: 'Montserrat';
      font-display: swap;
      src: url('https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCtr6Hw5aXpsog.woff2') format('woff2');
      font-weight: 700 800;
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+21A9, U+21B3, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>

  <!-- Optimized font loading with preload and font-display: swap -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload"
    href="https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2"
    as="font" type="font/woff2" crossorigin>
  <link rel="preload"
    href="https://fonts.gstatic.com/s/montserrat/v25/JTUHjIg1_i6t8kCHKm4532VJOt5-QNFgpCtr6Hw5aXpsog.woff2" as="font"
    type="font/woff2" crossorigin>

  <!-- Fallback font loading -->
  <link rel="preload"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Montserrat:wght@700;800&display=swap"
    as="style" onload="this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Montserrat:wght@700;800&display=swap">
  </noscript>

  <!-- Font Awesome CSS (Async Load) -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" as="style"
    onload="this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  </noscript>

  <!-- ===== LOADING PERFORMANCE OPTIMIZATIONS END ===== -->

  <!-- Analytics and Ads - Load after page interaction -->
  <script>
    // Load analytics after user interaction or 3 seconds
    function loadAnalytics() {
      // Google Analytics
      const gtagScript = document.createElement('script');
      gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-N55FBP8DJ2';
      gtagScript.async = true;
      document.head.appendChild(gtagScript);

      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-N55FBP8DJ2");

      // Clarity
      (function (c, l, a, r, i, t, y) {
        c[a] = c[a] || function () {
          (c[a].q = c[a].q || []).push(arguments);
        };
        t = l.createElement(r);
        t.async = 1;
        t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, "clarity", "script", "ti80pje0n3");
    }

    // Load analytics after user interaction
    let analyticsLoaded = false;
    function loadAnalyticsOnInteraction() {
      if (!analyticsLoaded) {
        analyticsLoaded = true;
        loadAnalytics();
      }
    }

    // Load analytics on first user interaction
    ['click', 'scroll', 'keydown', 'touchstart'].forEach(event => {
      document.addEventListener(event, loadAnalyticsOnInteraction, { once: true, passive: true });
    });

    // Fallback: load after 3 seconds
    setTimeout(loadAnalyticsOnInteraction, 3000);
  </script>

  <!-- Ads - Load only when needed -->
  <script>
    function loadAds() {
      const adScript = document.createElement('script');
      adScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3383070348689557';
      adScript.async = true;
      adScript.crossOrigin = 'anonymous';
      document.head.appendChild(adScript);
    }

    // Load ads when user scrolls to 50% of page
    let adsLoaded = false;
    function loadAdsOnScroll() {
      if (!adsLoaded && window.scrollY > window.innerHeight * 0.5) {
        adsLoaded = true;
        loadAds();
      }
    }

    window.addEventListener('scroll', loadAdsOnScroll, { passive: true });
  </script>
  <!-- Non-critical JavaScript loaded asynchronously -->
  <script src="../js/jqery.min.js" defer></script>

  <!-- Three.js and 3D functionality - Smart loading based on device performance -->
  <script>
    // Device performance detection
    let devicePerformance = 'high';
    let threeJsSupported = true;
    let threeJsLoaded = false;
    let threeJsPromise = null;

    // Detect device performance and capabilities
    function detectDevicePerformance() {
      const userAgent = navigator.userAgent.toLowerCase();
      const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent);
      const isLowEndDevice = /android 4\.|android 5\.|android 6\./i.test(userAgent);
      const memory = navigator.deviceMemory || 4; // Default to 4GB if not available
      const cores = navigator.hardwareConcurrency || 4; // Default to 4 cores if not available

      // Performance scoring
      let performanceScore = 100;

      if (isMobile) {
        performanceScore -= 20; // Mobile penalty
      }

      if (isLowEndDevice) {
        performanceScore -= 30; // Old Android penalty
      }

      if (memory < 2) {
        performanceScore -= 25; // Low memory penalty
      }

      if (cores < 4) {
        performanceScore -= 15; // Low core count penalty
      }

      // Check WebGL support
      const canvas = document.createElement('canvas');
      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if (!gl) {
        threeJsSupported = false;
        performanceScore -= 50;
      }

      // Determine performance tier
      if (performanceScore >= 70) {
        devicePerformance = 'high';
      } else if (performanceScore >= 40) {
        devicePerformance = 'medium';
      } else {
        devicePerformance = 'low';
      }

      console.log(`Device Performance: ${devicePerformance} (Score: ${performanceScore})`);
      console.log(`Three.js Supported: ${threeJsSupported}`);

      return { devicePerformance, threeJsSupported, performanceScore };
    }

    // Initialize device detection
    const deviceInfo = detectDevicePerformance();

    async function loadThreeJS() {
      if (threeJsLoaded) return;
      if (threeJsPromise) return threeJsPromise;

      // Check if device can handle Three.js
      if (!threeJsSupported || devicePerformance === 'low') {
        console.log('Three.js disabled for this device');
        return Promise.reject(new Error('Three.js not supported on this device'));
      }

      threeJsPromise = (async () => {
        try {
          // Show loading indicator
          const generateBtn = document.getElementById('generate');
          if (generateBtn) {
            generateBtn.textContent = 'Loading 3D Engine...';
            generateBtn.disabled = true;
          }

          // Dynamically import main module which handles all Three.js loading
          const mainModule = await import('./assets/main-zDHBVADl.js');

          // Initialize the 3D generator
          if (window.initialize3DGenerator) {
            await window.initialize3DGenerator();
          }

          threeJsLoaded = true;
          console.log('Three.js and 3D generator loaded successfully');

          // Restore button
          if (generateBtn) {
            generateBtn.textContent = 'Generate 3D Ambigram';
            generateBtn.disabled = false;
          }

          return { mainModule };
        } catch (error) {
          console.error('Failed to load Three.js:', error);

          // Show fallback message
          const generateBtn = document.getElementById('generate');
          if (generateBtn) {
            generateBtn.textContent = '3D Not Available';
            generateBtn.disabled = true;
            generateBtn.style.opacity = '0.5';
          }

          throw error;
        }
      })();

      return threeJsPromise;
    }

    // Mobile-optimized Three.js loading
    document.addEventListener('DOMContentLoaded', function () {
      const generateBtn = document.getElementById('generate');
      const firstInput = document.getElementById('first');
      const lastInput = document.getElementById('last');

      // Mobile-specific optimizations
      if (deviceInfo.devicePerformance === 'low') {
        // Hide 3D generator for low-end devices
        const threeDSection = document.querySelector('#generator');
        if (threeDSection) {
          threeDSection.style.display = 'none';
        }
        return;
      }

      if (generateBtn) {
        generateBtn.addEventListener('click', async function () {
          if (!threeJsLoaded) {
            // Show device-appropriate loading message
            if (deviceInfo.devicePerformance === 'medium') {
              generateBtn.textContent = 'Loading 3D (Mobile)...';
            } else {
              generateBtn.textContent = 'Loading 3D Engine...';
            }
            generateBtn.disabled = true;

            try {
              await loadThreeJS();
              generateBtn.textContent = 'Generate 3D Ambigram';
              generateBtn.disabled = false;
            } catch (error) {
              generateBtn.textContent = '3D Not Available';
              generateBtn.disabled = true;
              generateBtn.style.opacity = '0.5';
              console.error('Three.js loading failed:', error);
            }
          }
        }, { passive: true });
      }

      // Optimized input handling for mobile
      if (firstInput) {
        let inputTimeout;
        firstInput.addEventListener('input', () => {
          clearTimeout(inputTimeout);
          inputTimeout = setTimeout(() => {
            if (!threeJsLoaded && deviceInfo.devicePerformance !== 'low') {
              loadThreeJS();
            }
          }, 1000); // Delay loading on mobile
        }, { passive: true });
      }

      if (lastInput) {
        let inputTimeout;
        lastInput.addEventListener('input', () => {
          clearTimeout(inputTimeout);
          inputTimeout = setTimeout(() => {
            if (!threeJsLoaded && deviceInfo.devicePerformance !== 'low') {
              loadThreeJS();
            }
          }, 1000); // Delay loading on mobile
        }, { passive: true });
      }

      // Mobile-specific performance monitoring
      if (deviceInfo.devicePerformance === 'medium' || deviceInfo.devicePerformance === 'low') {
        // Monitor performance and adjust accordingly
        let frameCount = 0;
        let lastTime = performance.now();

        function monitorPerformance() {
          frameCount++;
          const currentTime = performance.now();

          if (currentTime - lastTime >= 1000) {
            const fps = frameCount;
            frameCount = 0;
            lastTime = currentTime;

            // If FPS is too low, disable 3D features
            if (fps < 30 && threeJsLoaded) {
              console.log('Low FPS detected, disabling 3D features');
              const canvas = document.querySelector('#c');
              if (canvas) {
                canvas.style.display = 'none';
              }
            }
          }

          if (deviceInfo.devicePerformance === 'medium') {
            requestAnimationFrame(monitorPerformance);
          }
        }

        if (deviceInfo.devicePerformance === 'medium') {
          requestAnimationFrame(monitorPerformance);
        }
      }
    });
  </script>

  <!-- Non-critical CSS loaded asynchronously -->
  <link rel="preload" href="./assets/main-D62YCris.css" as="style" onload="this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" crossorigin href="./assets/main-D62YCris.css">
  </noscript>
</head>

<body class="bg-light text-dark font-sans">
  <header class="bg-white shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center flex-wrap">
      <a href="/" class="flex items-center text-xl font-bold text-dark hover:text-primary transition-colors">
        <img src="/logo.png" alt="">
      </a>
      <nav id="main-nav" class="hidden md:flex items-center space-x-6">
        <a href="/generator" class="text-dark hover:text-primary font-medium transition-colors">2D Generator</a>
        <a href="/3d-generator" class="text-dark hover:text-primary font-medium transition-colors">3D Generator</a>
        <a href="/what-is-ambigram" class="text-dark hover:text-primary font-medium transition-colors">What is an
          Ambigram</a>

        <!-- Tutorial Dropdown - Adjusted href to prevent '#' error -->
        <div class="relative group">
          <a href="javascript:void(0);"
            class="text-dark hover:text-primary font-medium transition-colors inline-flex items-center group-hover:text-primary">
            Tutorial
            <svg class="ml-1 w-4 h-4 transition-transform duration-200 group-hover:rotate-180" fill="none"
              stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </a>
          <div class="absolute left-1/2 -translate-x-1/2 hidden group-hover:block bg-white shadow-lg rounded-md space-y-2 w-48 py-2 z-20 border border-gray-100 
    -mt-1"> <!-- 调整margin-top为负值，使其与父菜单重叠 -->
            <a href="/tutorial/multi-word-guide" class="block px-4 py-2 text-dark hover:bg-gray-100">Multi-Word
              Guide</a>
            <a href="/tutorial/tattoo-design" class="block px-4 py-2 text-dark hover:bg-gray-100">Tattoo Design
              Guide</a>
            <a href="/tutorial/two-name-ambigram" class="block px-4 py-2 text-dark hover:bg-gray-100">Two-Name
              Ambigram</a>
          </div>
        </div>

        <a href="/tattoo-design" class="font-medium transition-colors">Design Guides</a>
        <!-- Check this href as well, if it's meant to be a scroll-to link -->
        <a href="/generator"
          class="bg-primary text-white px-4 py-2 rounded-full hover:bg-blue-600 transition-colors">Start Creating</a>
        <a href="/privacy" class="text-dark hover:text-primary font-medium transition-colors">Privacy Policy</a>
        <a href="/terms" class="text-dark hover:text-primary font-medium transition-colors">Terms of Service</a>
        <a href="/about" class="text-dark hover:text-primary font-medium transition-colors">About Us</a>
      </nav>
      <button id="mobile-menu-btn" class="md:hidden text-dark text-xl" aria-label="Toggle Navigation">
        <i class="fa fa-bars"></i>
      </button>
    </div>
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-200">
      <a href="/generator" class="block py-2 px-4 text-dark hover:bg-gray-100">2D Generator</a>
      <a href="/3d-generator" class="block py-2 px-4 text-dark hover:bg-gray-100">3D Generator</a>
      <a href="/what-is-ambigram" class="block py-2 px-4 text-dark hover:bg-gray-100">What is an Ambigram</a>

      <!-- Mobile Tutorial Accordion/Dropdown -->
      <div class="border-b border-gray-200">
        <button class="flex justify-between items-center w-full py-2 px-4 text-dark hover:bg-gray-100"
          onclick="toggleMobileTutorial()">
          Tutorial
          <svg class="ml-2 w-4 h-4 transform transition-transform duration-300" id="mobile-tutorial-arrow" fill="none"
            stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="mobile-tutorial-links">
          <a href="/tutorial/multi-word-guide" class="block px-8 py-2 text-dark hover:bg-gray-100">Multi-Word
            Guide</a>
          <a href="/tutorial/tattoo-design" class="block px-8 py-2 text-dark hover:bg-gray-100">Tattoo Design
            Guide</a>
          <a href="/tutorial/two-name-ambigram" class="block px-8 py-2 text-dark hover:bg-gray-100">Two-Name
            Ambigram</a>
        </div>
      </div>

      <a href="/tattoo-design" class="block py-2 px-4 text-dark hover:bg-gray-100">Design Guides</a>
      <a href="/privacy" class="block py-2 px-4 text-dark hover:bg-gray-100">Privacy Policy</a>
      <a href="/terms" class="block py-2 px-4 text-dark hover:bg-gray-100">Terms of Service</a>
      <div class="p-4">
        <a href="#generator"
          class="block text-center bg-primary text-white px-4 py-2 rounded-full hover:bg-blue-600 transition-colors w-full">Start
          Creating</a>
      </div>
    </div>
  </header>

  <script>
    // JavaScript for toggling mobile menu visibility (if not already present)
    document.getElementById('mobile-menu-btn').addEventListener('click', function () {
      const mobileMenu = document.getElementById('mobile-menu');
      mobileMenu.classList.toggle('hidden');
    });

    // JavaScript for toggling the mobile tutorial dropdown
    function toggleMobileTutorial() {
      const tutorialLinks = document.getElementById('mobile-tutorial-links');
      const arrow = document.getElementById('mobile-tutorial-arrow');
      tutorialLinks.classList.toggle('hidden');
      arrow.classList.toggle('rotate-180'); // Rotate arrow when open
    }
  </script>

  <main>
    <section class="bg-gradient-to-br from-blue-50 to-green-50 py-20 md:py-24">
      <div class="container mx-auto px-4">
        <!-- Use a grid for a two-column layout on medium screens and up -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
          <!-- Column 1: Text Content & Call-to-Action Buttons -->
          <div class="text-center md:text-left">
            <h1 class="hero-title text-5xl md:text-6xl font-display font-extrabold text-dark mb-6 leading-tight">
              Create Visual Miracles with Our Ambigram Generator
            </h1>
            <p class="text-xl text-gray-600 max-w-xl mx-auto md:mx-0 mb-8">
              Instantly generate rotational, <strong>two-name</strong>, and
              <strong>3D printable</strong>
              ambigrams for free, giving your text a powerful dual identity.
            </p>
            <div class="flex flex-wrap gap-4 justify-center md:justify-start">
              <a href="#generator"
                class="bg-primary text-white px-8 py-3 rounded-full text-lg font-semibold hover:bg-blue-600 hover:-translate-y-1 transition-all duration-300 shadow-lg hover:shadow-xl">
                <i class="fa fa-magic mr-2"></i> Launch 3D Tool
              </a>
              <a href="#generator2d"
                class="bg-gray-800 text-white px-8 py-3 rounded-full text-lg font-semibold hover:bg-dark hover:-translate-y-1 transition-all duration-300 shadow-lg hover:shadow-xl">
                Start 2D Creation
              </a>
            </div>
          </div>

          <!-- Column 2: Image -->
          <div>
            <div class="bg-white p-3 sm:p-4 rounded-2xl shadow-2xl border border-gray-200/50">
              <img
                src="./assets/3D%20ambigram%20design%20example%20of%20a%20white%20marble%20sculpture%20that%20read-DEeH2fDq.webp"
                alt="3D ambigram design example of a white marble sculpture that reads 'ART' from the front and transforms into 'SCIENCE' when rotated 180 degrees."
                class="rounded-xl w-full h-auto" loading="lazy" width="600" height="400" style="aspect-ratio: 3/2;" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- What can you create? -->
    <section class="py-20 bg-white">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-3xl mx-auto mb-12">
          <h2 class="text-3xl font-display font-bold text-dark">
            What Can You Create?
          </h2>
          <p class="mt-4 text-gray-600">
            From personal gifts to professional branding, our tool brings your
            ideas to life.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <div
            class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 text-center transition-transform hover:-translate-y-2">
            <i class="fa fa-paint-brush text-4xl text-primary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">Tattoo Designs</h3>
            <p class="text-gray-600">
              Craft unique and meaningful tattoo stencils that tell a story
              from two perspectives.
            </p>
          </div>
          <div
            class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 text-center transition-transform hover:-translate-y-2">
            <i class="fa fa-cube text-4xl text-secondary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">3D Prints</h3>
            <p class="text-gray-600">
              Download STL files to create physical ambigrams, perfect for
              desks and gifts.
            </p>
          </div>
          <div
            class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 text-center transition-transform hover:-translate-y-2">
            <i class="fa fa-gift text-4xl text-primary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">Personalized Gifts</h3>
            <p class="text-gray-600">
              Design a special gift for a loved one by merging two names into
              one beautiful object.
            </p>
          </div>
          <div
            class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 text-center transition-transform hover:-translate-y-2">
            <i class="fa fa-lightbulb-o text-4xl text-secondary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">Logos & Branding</h3>
            <p class="text-gray-600">
              Create clever logos and brand assets that reward a second look.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- 3D GENERATOR SECTION (ENHANCED UI) -->
    <section id="generator" class="py-20 bg-light">
      <div class="container mx-auto px-4 md:px-6">
        <div class="text-center max-w-3xl mx-auto mb-16">
          <h2 class="text-4xl font-display font-bold text-dark mb-4">
            Free 3D Ambigram Generator
          </h2>
          <p class="text-xl text-gray-600">
            Perfect for 3D Prints & Physical Gifts
          </p>
        </div>
        <div class="max-w-6xl mx-auto bg-white rounded-2xl border border-gray-200 p-6 md:p-8 shadow-2xl">
          <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 space-y-6">
              <!-- Step 1 -->
              <div class="space-y-4">
                <h3 class="text-lg font-semibold text-dark flex items-center gap-2">
                  <span
                    class="bg-primary text-white w-6 h-6 rounded-full flex items-center justify-center text-sm">1</span>
                  Enter Your Words
                </h3>
                <div>
                  <label for="first" class="block text-gray-700 mb-2 font-medium">First Profile Text</label>
                  <input type="text" id="first" name="first" placeholder="e.g. LOVE" pattern="^[A-Za-z ]*$"
                    class="w-full bg-gray-100 border border-gray-300 rounded-lg px-4 py-3 text-dark focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" />
                </div>
                <div>
                  <label for="last" class="block text-gray-700 mb-2 font-medium">Second Profile Text</label>
                  <input type="text" id="last" name="last" placeholder="e.g. HATE" pattern="^[A-Za-z ]*$"
                    class="w-full bg-gray-100 border border-gray-300 rounded-lg px-4 py-3 text-dark focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" />
                </div>
              </div>
              <!-- Step 2 -->
              <div class="pt-4 border-t border-gray-200 space-y-3">
                <h3 class="text-lg font-semibold text-dark mb-2 flex items-center gap-2">
                  <span
                    class="bg-primary text-white w-6 h-6 rounded-full flex items-center justify-center text-sm">2</span>
                  Choose Options
                </h3>
                <label class="flex items-center gap-3 cursor-pointer group">
                  <input type="checkbox" id="quality" name="quality"
                    class="h-5 w-5 rounded border-gray-400 text-primary focus:ring-primary" />
                  <span class="text-gray-600 group-hover:text-dark transition-colors">High quality (slower)</span>
                </label>
                <label class="flex items-center gap-3 cursor-pointer group">
                  <input type="checkbox" id="base" name="base"
                    class="h-5 w-5 rounded border-gray-400 text-primary focus:ring-primary" />
                  <span class="text-gray-600 group-hover:text-dark transition-colors">Generate base</span>
                </label>
              </div>
              <!-- Step 3 -->
              <div class="pt-4 border-t border-gray-200">
                <h3 class="text-lg font-semibold text-dark mb-4 flex items-center gap-2">
                  <span
                    class="bg-primary text-white w-6 h-6 rounded-full flex items-center justify-center text-sm">3</span>
                  Generate Model
                </h3>
                <button id="generate"
                  class="w-full bg-primary hover:bg-blue-600 text-white py-3 rounded-lg font-medium transition-all hover:shadow-lg hover:shadow-blue-500/20 text-lg flex items-center justify-center gap-2">
                  <i class="fa fa-magic"></i> Generate 3D Ambigram
                </button>
              </div>
            </div>
            <div class="lg:col-span-8 flex flex-col">
              <div
                class="flex-1 bg-dark rounded-xl min-h-[200px] md:min-h-[500px] relative overflow-hidden border border-gray-200">
                <canvas id="c" class="w-full h-full cursor-grab active:cursor-grabbing"></canvas>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                <div class="bg-gray-100 p-4 rounded-lg">
                  <p class="text-center mb-3 text-gray-700 font-medium">
                    View Control
                  </p>
                  <div id="viewDiv" class="grid grid-cols-3 gap-2">
                    <button id="firstCam"
                      class="viewButton bg-gray-200 hover:bg-gray-300 text-dark px-4 py-2 rounded-lg transition-all">
                      First
                    </button>
                    <button id="lastCam"
                      class="viewButton bg-gray-200 hover:bg-gray-300 text-dark px-4 py-2 rounded-lg transition-all">
                      Second
                    </button>
                    <button id="isoCam"
                      class="viewButton bg-gray-200 hover:bg-gray-300 text-dark px-4 py-2 rounded-lg transition-all">
                      Isometric
                    </button>
                  </div>
                  <div class="mt-3 text-center">
                    <label class="flex items-center justify-center gap-3 cursor-pointer group">
                      <input type="checkbox" id="rotate" name="rotate"
                        class="h-5 w-5 rounded border-gray-400 text-primary focus:ring-primary" />
                      <span class="text-gray-600 group-hover:text-dark transition-colors">Auto-rotate</span>
                    </label>
                  </div>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg flex flex-col justify-center gap-3">
                  <p id="gifText" class="text-center text-red-500 font-medium" hidden="true">
                    Recording GIF...
                  </p>
                  <button id="gif"
                    class="bg-secondary hover:bg-green-600 text-white w-full px-4 py-2 rounded-lg transition-all flex items-center justify-center gap-2">
                    <i class="fa fa-file-movie-o"></i> Render GIF
                  </button>
                  <button id="download"
                    class="bg-primary hover:bg-blue-600 text-white w-full px-4 py-2 rounded-lg transition-all flex items-center justify-center gap-2">
                    <i class="fa fa-download"></i> Download STL file
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 2D AMBIGRAM GENERATOR SECTION (ENHANCED UI) -->
    <section id="generator2d" class="py-20 bg-white">
      <div class="container mx-auto px-4 md:px-6">
        <div class="text-center max-w-3xl mx-auto mb-16">
          <h2 class="text-4xl font-display font-bold text-dark mb-4">
            Free 2D Ambigram Generator
          </h2>
          <p class="text-xl text-gray-600">
            Ideal for Tattoos, Logos & Digital Art
          </p>
        </div>
        <div class="max-w-4xl mx-auto bg-light rounded-2xl border border-gray-200 p-6 md:p-8 shadow-xl">
          <!-- Input Controls -->
          <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end">
            <div class="md:col-span-3">
              <label for="ambigenerator_input" class="block text-gray-700 mb-2 font-medium">One or Two Words</label>
              <input type="text" id="ambigenerator_input" placeholder="e.g., family / forever"
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-dark focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                value="Hello" />
            </div>
            <div>
              <label for="style_dropdown" class="block text-gray-700 mb-2 font-medium">Style</label>
              <select id="style_dropdown"
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-dark focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors">
                <option value="new">Blocky</option>
                <option value="calligraphy">Calligraphy</option>
              </select>
            </div>
            <button id="generate-2d-btn"
              class="w-full bg-secondary hover:bg-green-600 text-white py-3 rounded-lg font-medium transition-all hover:shadow-lg text-lg">
              Generate
            </button>
          </div>

          <!-- Results Area -->
          <div class="mt-8 pt-6 border-t border-gray-200">
            <p class="text-center text-gray-500 mb-4">
              (Click an ambigram to rotate it)
            </p>
            <p id="loading_text" class="text-center text-gray-600 font-medium"></p>
            <div id="ambigrams" class="mt-4 grid grid-cols-2 lg:grid-cols-3 gap-4">
              <!-- Generated ambigrams will appear here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works -->
    <section class="py-20 bg-light">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-3xl mx-auto mb-16">
          <h2 class="text-3xl font-display font-bold text-dark">
            Simple Process, Incredible Results
          </h2>
          <p class="mt-4 text-gray-600">
            Creating your custom ambigram takes just a few clicks.
          </p>
        </div>
        <div class="relative max-w-4xl mx-auto">
          <div class="grid md:grid-cols-3 gap-12">
            <div class="text-center">
              <div
                class="bg-primary/10 w-24 h-24 rounded-full flex items-center justify-center mb-4 mx-auto ring-8 ring-white">
                <span class="text-3xl font-bold text-primary">1</span>
              </div>
              <h3 class="text-xl font-semibold mb-2">Enter Text</h3>
              <p class="text-gray-600">
                Input one or two words. The tool handles the complex geometry
                for you.
              </p>
            </div>
            <div class="text-center">
              <div
                class="bg-secondary/10 w-24 h-24 rounded-full flex items-center justify-center mb-4 mx-auto ring-8 ring-white">
                <span class="text-3xl font-bold text-secondary">2</span>
              </div>
              <h3 class="text-xl font-semibold mb-2">Preview & Customize</h3>
              <p class="text-gray-600">
                Rotate and inspect your design in the live 3D viewer. Adjust
                options as needed.
              </p>
            </div>
            <div class="text-center">
              <div
                class="bg-primary/10 w-24 h-24 rounded-full flex items-center justify-center mb-4 mx-auto ring-8 ring-white">
                <span class="text-3xl font-bold text-primary">3</span>
              </div>
              <h3 class="text-xl font-semibold mb-2">Download</h3>
              <p class="text-gray-600">
                Get a print-ready STL file or a shareable GIF. It’s that easy!
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-16 bg-white">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-3xl mx-auto mb-12">
          <h2 class="text-3xl font-display font-bold text-dark">
            Key Features: Beyond Simple Text
          </h2>
        </div>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
          <div class="text-center p-6 bg-white rounded-xl shadow-md">
            <i class="fa fa-users text-4xl text-primary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">Two-Name Creator</h3>
            <p class="text-gray-600">
              Merge two names or words into a single, beautiful rotating
              design.
            </p>
          </div>
          <div class="text-center p-6 bg-white rounded-xl shadow-md">
            <i class="fa fa-cube text-4xl text-secondary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">3D Printable Files</h3>
            <p class="text-gray-600">
              Download high-quality STL files ready for your 3D printer.
            </p>
          </div>
          <div class="text-center p-6 bg-white rounded-xl shadow-md">
            <i class="fa fa-paint-brush text-4xl text-primary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">Tattoo-Ready Styles</h3>
            <p class="text-gray-600">
              Designs are optimized for clean lines, ensuring legible tattoos.
            </p>
          </div>
          <div class="text-center p-6 bg-white rounded-xl shadow-md">
            <i class="fa fa-check-circle text-4xl text-secondary mb-4"></i>
            <h3 class="text-xl font-semibold mb-2">Free & No Watermarks</h3>
            <p class="text-gray-600">
              Download high-res files instantly with no hidden fees or
              watermarks.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Examples Section -->
    <section id="examples" class="py-16 bg-light">
      <div class="container mx-auto px-4">
        <h2 class="text-3xl font-display font-bold text-center text-dark mb-10">
          Popular Ambigram Designs
        </h2>
        <div class="relative">
          <div class="flex overflow-x-auto snap-x snap-mandatory space-x-6 p-4"
            style="scrollbar-width: none; -ms-overflow-style: none">
            <div class="snap-center flex-shrink-0 w-80 bg-white rounded-xl shadow-xl p-4 text-center border">
              <img
                src="data:image/webp;base64,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"
                alt="Two-Name Ambigram: Sarah/John" class="w-full h-auto rounded-lg mb-3 border" loading="lazy"
                width="320" height="240" style="aspect-ratio: 4/3;" />
              <p class="font-semibold">SARAH / JOHN (Two-Name)</p>
            </div>
            <div class="snap-center flex-shrink-0 w-80 bg-white rounded-xl shadow-xl p-4 text-center border">
              <img
                src="./assets/Tattoo-style%20TRUST%20ambigram%20with%20thick_%20smooth%20strokes%20suitable%20for%20permanent%20ink-Cb1hObRw.webp"
                alt="Tattoo Ambigram: TRUST" class="w-full h-auto rounded-lg mb-3 border" loading="lazy" width="320"
                height="240" style="aspect-ratio: 4/3;" />
              <p class="font-semibold">TRUST (Tattoo Style)</p>
            </div>
            <div
              class="snap-center flex-shrink-0 w-80 bg-white rounded-xl shadow-xl p-4 text-center border-2 border-secondary">
              <img
                src="data:image/webp;base64,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"
                alt="3D Printed Ambigram" class="w-full h-auto rounded-lg mb-3 border" loading="lazy" />
              <p class="font-semibold text-secondary">
                3D PRINT (Physical Object)
              </p>
            </div>
            <div class="snap-center flex-shrink-0 w-80 bg-white rounded-xl shadow-xl p-4 text-center border">
              <img
                src="./assets/Animated%20GIF%20of%20ILLUSION%20rotating%20180%20degrees%20while%20maintaining%20readability-BzmTJfTv.webp"
                alt="Animated GIF: ILLUSION" class="w-full h-auto rounded-lg mb-3 border" loading="lazy" />
              <p class="font-semibold">ILLUSION (Animated GIF)</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-20 bg-white">
      <div class="container mx-auto px-4 max-w-4xl">
        <div class="text-center max-w-3xl mx-auto mb-12">
          <h2 class="text-3xl font-display font-bold text-dark">
            Frequently Asked Questions
          </h2>
        </div>
        <div class="space-y-4">
          <div class="bg-white p-2 rounded-lg shadow-sm border">
            <button
              class="faq-toggle w-full text-left p-4 font-semibold text-gray-800 flex justify-between items-center">
              Is this ambigram generator really free?<i class="fa fa-chevron-down transition-transform"></i>
            </button>
            <div class="faq-answer hidden p-4 border-t text-gray-600">
              Yes, absolutely! All features are 100% free to use. There are no
              hidden costs, subscriptions, or watermarks on your downloads.
            </div>
          </div>
          <div class="bg-white p-2 rounded-lg shadow-sm border">
            <button
              class="faq-toggle w-full text-left p-4 font-semibold text-gray-800 flex justify-between items-center">
              What file formats can I download?<i class="fa fa-chevron-down transition-transform"></i>
            </button>
            <div class="faq-answer hidden p-4 border-t text-gray-600">
              The 3D generator provides a <strong>.STL file</strong> for 3D
              printing and an animated <strong>.GIF file</strong> for sharing.
              Our 2D generator provides high-resolution PNG and SVG files.
            </div>
          </div>
          <div class="bg-white p-2 rounded-lg shadow-sm border">
            <button
              class="faq-toggle w-full text-left p-4 font-semibold text-gray-800 flex justify-between items-center">
              Can I create a two-name ambigram?<i class="fa fa-chevron-down transition-transform"></i>
            </button>
            <div class="faq-answer hidden p-4 border-t text-gray-600">
              Yes! Our generator excels at creating two-name ambigrams. Simply
              enter a different word in each of the text input fields to see
              them merge into one design.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Final CTA Section -->
    <section class="py-20 bg-light">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-display font-bold text-dark mb-4">
          Ready to Create Your Masterpiece?
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-8">
          Unleash your creativity and design a unique ambigram in seconds.
          It’s free, fast, and fun.
        </p>
        <a href="#generator"
          class="bg-secondary text-white px-10 py-4 rounded-full text-xl font-semibold hover:bg-green-600 hover:-translate-y-1 transition-all duration-300 shadow-lg hover:shadow-xl inline-flex items-center gap-3">
          <i class="fa fa-magic"></i> Generate for Free
        </a>
      </div>
    </section>
  </main>

  <footer class="bg-gray-900 text-white pt-16 pb-8">
    <div class="container mx-auto px-4">
      <div class="mx-auto pb-4">
        <h3 class="text-2xl font-bold font-display text-white mb-2">
          AmbigramGenerator.me
        </h3>
        <p class="text-gray-400 text-sm">
          The essential toolkit for ambigram creation, built for speed and reliability.
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 pb-10 border-b border-gray-700">
        <div>
          <h4 class="text-lg font-semibold mb-4 text-white">Product </h4>
          <ul class="space-y-3">
            <li><a href="/" class="text-gray-400 hover:text-white transition-colors text-sm">Home</a></li>
            <li><a href="/generator" class="text-gray-400 hover:text-white transition-colors text-sm">2D Generator</a>
            </li>
            <li><a href="/3d-generator" class="text-gray-400 hover:text-white transition-colors text-sm">3D
                Generator</a></li>

          </ul>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4 text-white">Guides </h4>
          <ul class="space-y-3">
            <li><a href="/what-is-ambigram" class="text-gray-400 hover:text-white transition-colors text-sm">What
                is an Ambigram</a></li>

            <li><a href="/tattoo-design" class="text-gray-400 hover:text-white transition-colors text-sm"> Design
                Guide</a></li>

          </ul>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4 text-white">Tutorial </h4>
          <ul class="space-y-3">
            <li><a href="/tutorial/multi-word-guide"
                class="text-gray-400 hover:text-white transition-colors text-sm">Multi-Word Ambigram</a></li>
            <li><a href="/tutorial/tattoo-design"
                class="text-gray-400 hover:text-white transition-colors text-sm">Tattoo Design Guide</a></li>
            <li><a href="/tutorial/two-name-ambigram"
                class="text-gray-400 hover:text-white transition-colors text-sm">Two-Name Ambigram</a></li>

          </ul>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-4 text-white">Support</h4>
          <ul class="space-y-3">
            <li><a href="/faq" class="text-gray-400 hover:text-white transition-colors text-sm">FAQ</a></li>
            <li><a href="/privacy" class="text-gray-400 hover:text-white transition-colors text-sm">Privacy Policy</a>
            </li>
            <li><a href="/terms" class="text-gray-400 hover:text-white transition-colors text-sm">Terms of Service</a>
            </li>
            <li><a href="/about" class="text-gray-400 hover:text-white transition-colors text-sm">About Us</a></li>
          </ul>
        </div>
      </div>

      <div class="mt-8 text-center text-gray-400 text-xs">
        <p>
          &copy; <span id="current-year">2024</span> AmbigramGenerator.me Technologies. All Rights Reserved. Not
          affiliated with any other generator site.
        </p>
        <script>document.getElementById('current-year').textContent = new Date().getFullYear();</script>
      </div>
    </div>

  </footer>
  <!-- Deferred scripts for 3D Generator functionality -->





  <!-- SCRIPT FOR ALL PAGE-LEVEL INTERACTIONS (MENUS, FAQ, SCROLL) -->
  <script>
    // Use requestIdleCallback for non-critical initialization
    function initializePage() {
      // FAQ Accordion - Use passive listeners and batch DOM updates
      const faqButtons = document.querySelectorAll(".faq-toggle");
      if (faqButtons.length > 0) {
        // Batch DOM reads to prevent reflows
        const faqElements = Array.from(faqButtons).map(button => ({
          button,
          answer: button.nextElementSibling,
          icon: button.querySelector("i")
        }));

        faqElements.forEach(({ button, answer, icon }) => {
          button.addEventListener("click", () => {
            // Batch DOM writes to prevent reflows
            requestAnimationFrame(() => {
              answer.classList.toggle("hidden");
              icon.classList.toggle("rotate-180");
            });
          }, { passive: true });
        });
      }

      // Smooth Scroll for anchor links - Optimized scroll behavior
      const anchorLinks = document.querySelectorAll('a[href^="#"]');
      if (anchorLinks.length > 0) {
        anchorLinks.forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            e.preventDefault();
            const targetId = this.getAttribute("href");
            const targetElement = document.querySelector(targetId);

            if (targetElement) {
              // Hide mobile menu if open - batch DOM operations
              if (mobileMenu && !mobileMenu.classList.contains("hidden")) {
                requestAnimationFrame(() => {
                  mobileMenu.classList.add("hidden");
                });
              }

              // Use smooth scroll with performance optimization
              requestAnimationFrame(() => {
                targetElement.scrollIntoView({
                  behavior: "smooth",
                  block: "start"
                });
              });
            }
          }, { passive: true });
        });
      }
    }

    // Initialize immediately for critical functionality
    document.addEventListener("DOMContentLoaded", initializePage);

    // Use requestIdleCallback for non-critical initialization
    if ('requestIdleCallback' in window) {
      requestIdleCallback(initializePage);
    } else {
      setTimeout(initializePage, 0);
    }
  </script>

  <!-- SCRIPT FOR 2D AMBIGRAM GENERATOR (OPTIMIZED FOR PERFORMANCE) -->
  <script>
    // Defer 2D generator initialization until user interaction
    let twoDGeneratorLoaded = false;

    function loadTwoDGenerator() {
      if (twoDGeneratorLoaded) return;
      twoDGeneratorLoaded = true;

      // Load glyph data and initialize 2D generator
      initializeTwoDGenerator();
    }

    function initializeTwoDGenerator() {
      // start, middle, end, strokewidth, height
      let glyphs_lookup = {
        new: [
          [
            ["a1", "a2i"],
            ["r2i"],
            ["c2i", "c1"],
            ["d2i"],
            ["e2i", "e1"],
            ["f1i"],
            ["g2i"],
            ["h2i", "h2"],
            ["i1"],
            ["j1", "j2"],
            ["k2i"],
            ["l1"],
            ["m2i", "m3"],
            ["n2i"],
            ["o2"],
            ["p1i"],
            ["q2"],
            ["r2i", "r1"],
            ["s2i", "s1"],
            ["t1i"],
            ["u2"],
            ["v1i", "v2"],
            ["w2", "w3"],
            ["x2"],
            ["y1i"],
            ["z1", "z2"],
          ],
          [
            ["a2"],
            ["h2"],
            ["c2", "c1"],
            ["d2"],
            ["e2", "e1"],
            ["f1"],
            ["g2"],
            ["h2"],
            ["i1"],
            ["j1", "j2"],
            ["k2"],
            ["l1"],
            ["m3", "m2"],
            ["n2"],
            ["o2"],
            ["p1"],
            ["q2"],
            ["r1", "r2"],
            ["s1", "s2"],
            ["t1"],
            ["u2"],
            ["v1", "v2"],
            ["w2", "w3"],
            ["x2"],
            ["y1"],
            ["z1", "z2"],
          ],
          [
            ["a2", "a1i"],
            ["h2"],
            ["c2", "c1"],
            ["d2"],
            ["e2", "e1"],
            ["f1"],
            ["g2"],
            ["h2"],
            ["i1"],
            ["j1", "j2"],
            ["k2"],
            ["l1"],
            ["m3", "m2"],
            ["n2"],
            ["o2"],
            ["p1"],
            ["q2"],
            ["r1", "r2"],
            ["s1", "s2"],
            ["t1"],
            ["u2"],
            ["v1", "v2"],
            ["w2", "w3"],
            ["x2"],
            ["y1"],
            ["z1", "z2"],
          ],
          100,
          600,
        ],

        calligraphy: [
          [
            ["a2"],
            ["b2"],
            ["c2"],
            ["d2"],
            ["e2"],
            ["f1"],
            ["g2"],
            ["h2"],
            ["i1"],
            ["j1"],
            ["k2"],
            ["l1"],
            ["m3"],
            ["n2"],
            ["o2"],
            ["p2"],
            ["q2"],
            ["r1"],
            ["s1"],
            ["t1"],
            ["u2"],
            ["v2"],
            ["w2"],
            ["x2"],
            ["y1"],
            ["z1"],
          ],
          [
            ["a2"],
            ["b2"],
            ["c2"],
            ["d2"],
            ["e2"],
            ["f1"],
            ["g2"],
            ["h2"],
            ["i1"],
            ["j1"],
            ["k2"],
            ["l1"],
            ["m3"],
            ["n2"],
            ["o2"],
            ["p2"],
            ["q2"],
            ["r1"],
            ["s1"],
            ["t1"],
            ["u2"],
            ["v2"],
            ["w2"],
            ["x2"],
            ["y1"],
            ["z1"],
          ],
          [
            ["a2"],
            ["b2"],
            ["c2"],
            ["d2"],
            ["e2"],
            ["f1"],
            ["g2"],
            ["h2"],
            ["i1"],
            ["j1"],
            ["k2"],
            ["l1"],
            ["m3"],
            ["n2"],
            ["o2"],
            ["p2"],
            ["q2"],
            ["r1"],
            ["s1"],
            ["t1"],
            ["u2"],
            ["v2"],
            ["w2"],
            ["x2"],
            ["y1"],
            ["z1"],
          ],

          100,
          600,
        ],
      };

      function clear_ambigrams() {
        const ambigramsBox = document.getElementById("ambigrams");
        if (ambigramsBox) ambigramsBox.innerHTML = "";
      }

      function spin(spin_img) {
        let angle = parseInt(spin_img.dataset.angle || 0);
        angle += 180;
        spin_img.dataset.angle = angle;
        spin_img.style.transform = `rotate(${angle}deg)`;
      }

      async function getGlyphImage(name, style) {
        return new Promise((resolve) => {
          const glyph = new Image();
          let folder = "glyph images/" + style + "/";
          glyph.src = folder + name + ".png";
          glyph.onload = function () {
            resolve(glyph);
          };
          glyph.onerror = function () {
            const units = parseInt(name[1]) || 1;
            const strokeWidth = glyphs_lookup[style][3];
            const height = glyphs_lookup[style][4];
            const canvas = document.createElement("canvas");
            canvas.width = units * strokeWidth;
            canvas.height = height;
            resolve(canvas);
          };
        });
      }

      function letterIndex(letter) {
        return letter.charCodeAt(0) - "a".charCodeAt(0);
      }

      function getPossibleGlyphs(words, style) {
        let glyphs = [[], []];
        let starters = glyphs_lookup[style][0];
        let middlers = glyphs_lookup[style][1];
        let enders = glyphs_lookup[style][2];

        for (let wordIndex = 0; wordIndex < 2; wordIndex++) {
          const glyphList = glyphs[wordIndex];
          const word = words[wordIndex];
          if (!word || word.length === 0) continue;
          glyphList.push(starters[letterIndex(word[0])]);
          for (let letterPos = 1; letterPos < word.length - 1; letterPos++) {
            glyphList.push(middlers[letterIndex(word[letterPos])]);
          }
          if (word.length > 1) {
            glyphList.push(enders[letterIndex(word[word.length - 1])]);
          }
        }
        return glyphs;
      }

      function cartesian(a) {
        if (!a || a.length === 0) return [[]];
        return a.reduce((a, b) =>
          a.flatMap((d) => b.map((e) => [d, e].flat()))
        );
      }

      function countStrokes(structure) {
        if (!Array.isArray(structure)) return 0;
        let strokes = 0;
        for (const glyph of structure) {
          strokes += parseInt(glyph[1]) || 0;
        }
        return strokes;
      }

      function say(choices) {
        alert(choices[Math.floor(Math.random() * choices.length)]);
      }

      function spawnCanvas(width, height) {
        const canvas = document.createElement("canvas");
        canvas.width = width;
        canvas.height = height;
        let ctx = canvas.getContext("2d");
        // MODIFICATION: Changed random color to a neutral gray to match the site's aesthetic.
        ctx.fillStyle = "#E5E7EB"; // Tailwind's gray-200
        ctx.fillRect(0, 0, width, height);
        return canvas;
      }

      // Break down the generation process into smaller chunks
      async function generateAmbigrams() {
        let words = document.getElementById("ambigenerator_input").value;
        let style = document.getElementById("style_dropdown").value;
        let doubleWords = true;

        if (/[^a-zA-Z\s]/.test(words)) {
          say([
            "No special characters please.",
            "Only letters and spaces are allowed.",
          ]);
          return;
        }

        words = words
          .toLowerCase()
          .trim()
          .split(/\s+/)
          .filter((w) => w);

        if (words.length > 2) {
          say([
            `I can't make an ambigram of ${words.length} words.`,
            "Please use one or two words.",
          ]);
          return;
        } else if (words.length === 0) {
          say(["You have to type something first!", "The input box is empty."]);
          return;
        } else if (words.length == 1) {
          words = [words[0], words[0]];
          doubleWords = false;
        }

        const glyphs = getPossibleGlyphs(words, style);
        let permutsA = cartesian(glyphs[0]);
        let permutsB = cartesian(glyphs[1]);
        let matchingCombos = [];

        // Use requestIdleCallback to break up heavy computation
        if (doubleWords) {
          for (let permutA of permutsA) {
            for (let permutB of permutsB) {
              permutA = Array.isArray(permutA) ? permutA : [permutA];
              permutB = Array.isArray(permutB) ? permutB : [permutB];
              if (countStrokes(permutA) == countStrokes(permutB)) {
                matchingCombos.push([permutA, permutB]);
              }
            }
          }
        } else {
          for (let i of permutsA) {
            matchingCombos.push([i, i]);
          }
        }

        if (matchingCombos.length == 0) {
          say([
            `Could not match "${words[0]}" with "${words[1]}".`,
            "These words don't seem to fit together.",
          ]);
          return;
        }

        clear_ambigrams();
        document.getElementById("loading_text").textContent = "generating...";

        const ambigramsBox = document.getElementById("ambigrams");

        // Process ambigrams in chunks to avoid blocking the main thread
        const processChunk = async (combos, startIndex) => {
          const chunkSize = 3; // Process 3 ambigrams at a time
          const endIndex = Math.min(startIndex + chunkSize, combos.length);

          for (let i = startIndex; i < endIndex; i++) {
            const combo = combos[i];
            let width = countStrokes(combo[0]);
            const strokeWidth = glyphs_lookup[style][3];
            width += 3;
            width *= strokeWidth;
            let canvas = spawnCanvas(width, glyphs_lookup[style][4]);
            let ctx = canvas.getContext("2d");

            let x = 0;
            for (const glyph of combo[0]) {
              const glyphImage = await getGlyphImage(glyph, style);
              ctx.drawImage(glyphImage, x, 0);
              x += strokeWidth * countStrokes([glyph]);
            }
            ctx.rotate(Math.PI);

            x = 0;
            for (const glyph of combo[1]) {
              const glyphImage = await getGlyphImage(glyph, style);
              ctx.drawImage(glyphImage, x - canvas.width, -canvas.height);
              x += strokeWidth * countStrokes([glyph]);
            }

            let img = new Image();
            img.src = canvas.toDataURL();
            let img_element = img;

            // MODIFICATION: Added Tailwind classes for styling to match the site's aesthetic.
            img_element.className =
              "ambigram w-full h-auto bg-gray-200 rounded-lg shadow-md cursor-pointer transition-transform duration-500 ease-in-out";
            img_element.loading = "lazy";
            img_element.alt = `Ambigram: ${words[0]} / ${words[1]}`;
            img_element.width = 320;
            img_element.height = 240;
            img_element.style.aspectRatio = "4/3";

            ambigramsBox.appendChild(img_element);
            img_element.addEventListener("click", () => spin(img_element), { passive: true });

            if (style == "pixel") {
              img_element.style.imageRendering = "pixelated";
            }
          }

          // Yield control back to the browser
          if (endIndex < combos.length) {
            await new Promise(resolve => setTimeout(resolve, 0));
            return processChunk(combos, endIndex);
          }
        };

        // Start processing in chunks
        await processChunk(matchingCombos.slice(0, 12), 0);
        document.getElementById("loading_text").textContent = "";
      }

      // Make generateAmbigrams function globally accessible
      window.generateAmbigrams = generateAmbigrams;

      // Initialize event listeners
      document
        .getElementById("ambigenerator_input")
        ?.addEventListener("keydown", (event) => {
          if (event.key == "Enter") {
            event.preventDefault();
            generateAmbigrams();
          }
        });

      // Add click event listener for the generate button
      const generateBtn = document.getElementById('generate-2d-btn');
      if (generateBtn) {
        generateBtn.addEventListener('click', generateAmbigrams, { passive: true });
      }

      // Auto-generate on load
      generateAmbigrams();
    }

    // Load 2D generator when user interacts with it
    document.addEventListener('DOMContentLoaded', function () {
      const input = document.getElementById('ambigenerator_input');
      const generateBtn = document.getElementById('generate-2d-btn');

      if (input) {
        input.addEventListener('focus', loadTwoDGenerator);
        input.addEventListener('input', loadTwoDGenerator);
      }

      if (generateBtn) {
        generateBtn.addEventListener('click', loadTwoDGenerator);
      }

      // Load immediately if there's already content
      if (input && input.value) {
        loadTwoDGenerator();
      }
    });
  </script>
</body>

</html>